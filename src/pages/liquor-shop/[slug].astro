---

import Layout from '../../layouts/Layout.astro';

const { slug } = Astro.params;

export async function getStaticPaths() {
  const res = await fetch(`${import.meta.env.PUBLIC_API_URL}/store?per_page=100&order=asc&_embed`);
  const posts = await res.json();

  return posts.map(post => (
    {
      params: { slug: post.slug },
      props: { post: post },
    }
  ))
}

const store = Astro.props.post;
console.log(store);
// console.log(store._embedded);
const eyeCatch = store._embedded['wp:featuredmedia'] ? store._embedded['wp:featuredmedia'][0]
  : {
    source_url: 'https://data.nga-osaka.com/2023/wp-content/uploads/2023/08/preparation-image16-9.jpg',
    media_details: {
      width: '1920',
      height: '1280',
    }
  };

---

<Layout title={ store.title.rendered }>
</Layout>